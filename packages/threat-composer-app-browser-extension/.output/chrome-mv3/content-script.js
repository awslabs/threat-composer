(function(){"use strict";var ce=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ge(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var W={exports:{}};(function(e,r){(function(n,t){t(e)})(typeof globalThis<"u"?globalThis:typeof self<"u"?self:ce,function(n){var t,s;if(!((s=(t=globalThis.chrome)==null?void 0:t.runtime)!=null&&s.id))throw new Error("This script should only be loaded in a browser extension.");if(typeof globalThis.browser>"u"||Object.getPrototypeOf(globalThis.browser)!==Object.prototype){const a="The message port closed before a response was received.",g=m=>{const A={alarms:{clear:{minArgs:0,maxArgs:1},clearAll:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getAll:{minArgs:0,maxArgs:0}},bookmarks:{create:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},getChildren:{minArgs:1,maxArgs:1},getRecent:{minArgs:1,maxArgs:1},getSubTree:{minArgs:1,maxArgs:1},getTree:{minArgs:0,maxArgs:0},move:{minArgs:2,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeTree:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}},browserAction:{disable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},enable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},getBadgeBackgroundColor:{minArgs:1,maxArgs:1},getBadgeText:{minArgs:1,maxArgs:1},getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},openPopup:{minArgs:0,maxArgs:0},setBadgeBackgroundColor:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setBadgeText:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},browsingData:{remove:{minArgs:2,maxArgs:2},removeCache:{minArgs:1,maxArgs:1},removeCookies:{minArgs:1,maxArgs:1},removeDownloads:{minArgs:1,maxArgs:1},removeFormData:{minArgs:1,maxArgs:1},removeHistory:{minArgs:1,maxArgs:1},removeLocalStorage:{minArgs:1,maxArgs:1},removePasswords:{minArgs:1,maxArgs:1},removePluginData:{minArgs:1,maxArgs:1},settings:{minArgs:0,maxArgs:0}},commands:{getAll:{minArgs:0,maxArgs:0}},contextMenus:{remove:{minArgs:1,maxArgs:1},removeAll:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},cookies:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:1,maxArgs:1},getAllCookieStores:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},devtools:{inspectedWindow:{eval:{minArgs:1,maxArgs:2,singleCallbackArg:!1}},panels:{create:{minArgs:3,maxArgs:3,singleCallbackArg:!0},elements:{createSidebarPane:{minArgs:1,maxArgs:1}}}},downloads:{cancel:{minArgs:1,maxArgs:1},download:{minArgs:1,maxArgs:1},erase:{minArgs:1,maxArgs:1},getFileIcon:{minArgs:1,maxArgs:2},open:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},pause:{minArgs:1,maxArgs:1},removeFile:{minArgs:1,maxArgs:1},resume:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},extension:{isAllowedFileSchemeAccess:{minArgs:0,maxArgs:0},isAllowedIncognitoAccess:{minArgs:0,maxArgs:0}},history:{addUrl:{minArgs:1,maxArgs:1},deleteAll:{minArgs:0,maxArgs:0},deleteRange:{minArgs:1,maxArgs:1},deleteUrl:{minArgs:1,maxArgs:1},getVisits:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1}},i18n:{detectLanguage:{minArgs:1,maxArgs:1},getAcceptLanguages:{minArgs:0,maxArgs:0}},identity:{launchWebAuthFlow:{minArgs:1,maxArgs:1}},idle:{queryState:{minArgs:1,maxArgs:1}},management:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},getSelf:{minArgs:0,maxArgs:0},setEnabled:{minArgs:2,maxArgs:2},uninstallSelf:{minArgs:0,maxArgs:1}},notifications:{clear:{minArgs:1,maxArgs:1},create:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:0},getPermissionLevel:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},pageAction:{getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},hide:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},permissions:{contains:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},request:{minArgs:1,maxArgs:1}},runtime:{getBackgroundPage:{minArgs:0,maxArgs:0},getPlatformInfo:{minArgs:0,maxArgs:0},openOptionsPage:{minArgs:0,maxArgs:0},requestUpdateCheck:{minArgs:0,maxArgs:0},sendMessage:{minArgs:1,maxArgs:3},sendNativeMessage:{minArgs:2,maxArgs:2},setUninstallURL:{minArgs:1,maxArgs:1}},sessions:{getDevices:{minArgs:0,maxArgs:1},getRecentlyClosed:{minArgs:0,maxArgs:1},restore:{minArgs:0,maxArgs:1}},storage:{local:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},managed:{get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1}},sync:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}}},tabs:{captureVisibleTab:{minArgs:0,maxArgs:2},create:{minArgs:1,maxArgs:1},detectLanguage:{minArgs:0,maxArgs:1},discard:{minArgs:0,maxArgs:1},duplicate:{minArgs:1,maxArgs:1},executeScript:{minArgs:1,maxArgs:2},get:{minArgs:1,maxArgs:1},getCurrent:{minArgs:0,maxArgs:0},getZoom:{minArgs:0,maxArgs:1},getZoomSettings:{minArgs:0,maxArgs:1},goBack:{minArgs:0,maxArgs:1},goForward:{minArgs:0,maxArgs:1},highlight:{minArgs:1,maxArgs:1},insertCSS:{minArgs:1,maxArgs:2},move:{minArgs:2,maxArgs:2},query:{minArgs:1,maxArgs:1},reload:{minArgs:0,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeCSS:{minArgs:1,maxArgs:2},sendMessage:{minArgs:2,maxArgs:3},setZoom:{minArgs:1,maxArgs:2},setZoomSettings:{minArgs:1,maxArgs:2},update:{minArgs:1,maxArgs:2}},topSites:{get:{minArgs:0,maxArgs:0}},webNavigation:{getAllFrames:{minArgs:1,maxArgs:1},getFrame:{minArgs:1,maxArgs:1}},webRequest:{handlerBehaviorChanged:{minArgs:0,maxArgs:0}},windows:{create:{minArgs:0,maxArgs:1},get:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:1},getCurrent:{minArgs:0,maxArgs:1},getLastFocused:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}}};if(Object.keys(A).length===0)throw new Error("api-metadata.json has not been included in browser-polyfill");class x extends WeakMap{constructor(i,u=void 0){super(u),this.createItem=i}get(i){return this.has(i)||this.set(i,this.createItem(i)),super.get(i)}}const $e=o=>o&&typeof o=="object"&&typeof o.then=="function",oe=(o,i)=>(...u)=>{m.runtime.lastError?o.reject(new Error(m.runtime.lastError.message)):i.singleCallbackArg||u.length<=1&&i.singleCallbackArg!==!1?o.resolve(u[0]):o.resolve(u)},N=o=>o==1?"argument":"arguments",Be=(o,i)=>function(f,...p){if(p.length<i.minArgs)throw new Error(`Expected at least ${i.minArgs} ${N(i.minArgs)} for ${o}(), got ${p.length}`);if(p.length>i.maxArgs)throw new Error(`Expected at most ${i.maxArgs} ${N(i.maxArgs)} for ${o}(), got ${p.length}`);return new Promise((y,w)=>{if(i.fallbackToNoCallback)try{f[o](...p,oe({resolve:y,reject:w},i))}catch(c){console.warn(`${o} API method doesn't seem to support the callback parameter, falling back to call it without a callback: `,c),f[o](...p),i.fallbackToNoCallback=!1,i.noCallback=!0,y()}else i.noCallback?(f[o](...p),y()):f[o](...p,oe({resolve:y,reject:w},i))})},ie=(o,i,u)=>new Proxy(i,{apply(f,p,y){return u.call(p,o,...y)}});let $=Function.call.bind(Object.prototype.hasOwnProperty);const B=(o,i={},u={})=>{let f=Object.create(null),p={has(w,c){return c in o||c in f},get(w,c,C){if(c in f)return f[c];if(!(c in o))return;let d=o[c];if(typeof d=="function")if(typeof i[c]=="function")d=ie(o,o[c],i[c]);else if($(u,c)){let E=Be(c,u[c]);d=ie(o,o[c],E)}else d=d.bind(o);else if(typeof d=="object"&&d!==null&&($(i,c)||$(u,c)))d=B(d,i[c],u[c]);else if($(u,"*"))d=B(d,i[c],u["*"]);else return Object.defineProperty(f,c,{configurable:!0,enumerable:!0,get(){return o[c]},set(E){o[c]=E}}),d;return f[c]=d,d},set(w,c,C,d){return c in f?f[c]=C:o[c]=C,!0},defineProperty(w,c,C){return Reflect.defineProperty(f,c,C)},deleteProperty(w,c){return Reflect.deleteProperty(f,c)}},y=Object.create(o);return new Proxy(y,p)},V=o=>({addListener(i,u,...f){i.addListener(o.get(u),...f)},hasListener(i,u){return i.hasListener(o.get(u))},removeListener(i,u){i.removeListener(o.get(u))}}),Me=new x(o=>typeof o!="function"?o:function(u){const f=B(u,{},{getContent:{minArgs:0,maxArgs:0}});o(f)}),ae=new x(o=>typeof o!="function"?o:function(u,f,p){let y=!1,w,c=new Promise(_=>{w=function(v){y=!0,_(v)}}),C;try{C=o(u,f,w)}catch(_){C=Promise.reject(_)}const d=C!==!0&&$e(C);if(C!==!0&&!d&&!y)return!1;const E=_=>{_.then(v=>{p(v)},v=>{let z;v&&(v instanceof Error||typeof v.message=="string")?z=v.message:z="An unexpected error occurred",p({__mozWebExtensionPolyfillReject__:!0,message:z})}).catch(v=>{console.error("Failed to send onMessage rejected reply",v)})};return E(d?C:c),!0}),Le=({reject:o,resolve:i},u)=>{m.runtime.lastError?m.runtime.lastError.message===a?i():o(new Error(m.runtime.lastError.message)):u&&u.__mozWebExtensionPolyfillReject__?o(new Error(u.message)):i(u)},le=(o,i,u,...f)=>{if(f.length<i.minArgs)throw new Error(`Expected at least ${i.minArgs} ${N(i.minArgs)} for ${o}(), got ${f.length}`);if(f.length>i.maxArgs)throw new Error(`Expected at most ${i.maxArgs} ${N(i.maxArgs)} for ${o}(), got ${f.length}`);return new Promise((p,y)=>{const w=Le.bind(null,{resolve:p,reject:y});f.push(w),u.sendMessage(...f)})},Fe={devtools:{network:{onRequestFinished:V(Me)}},runtime:{onMessage:V(ae),onMessageExternal:V(ae),sendMessage:le.bind(null,"sendMessage",{minArgs:1,maxArgs:3})},tabs:{sendMessage:le.bind(null,"sendMessage",{minArgs:2,maxArgs:3})}},q={clear:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}};return A.privacy={network:{"*":q},services:{"*":q},websites:{"*":q}},B(m,Fe,A)};n.exports=g(chrome)}else n.exports=globalThis.browser})})(W);var ue=W.exports,T=ge(ue);function Ue(e){return e}var l={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var S=Symbol.for("react.element"),me=Symbol.for("react.portal"),Ae=Symbol.for("react.fragment"),fe=Symbol.for("react.strict_mode"),de=Symbol.for("react.profiler"),pe=Symbol.for("react.provider"),xe=Symbol.for("react.context"),be=Symbol.for("react.forward_ref"),he=Symbol.for("react.suspense"),ye=Symbol.for("react.memo"),we=Symbol.for("react.lazy"),G=Symbol.iterator;function Ce(e){return e===null||typeof e!="object"?null:(e=G&&e[G]||e["@@iterator"],typeof e=="function"?e:null)}var H={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},J=Object.assign,Z={};function k(e,r,n){this.props=e,this.context=r,this.refs=Z,this.updater=n||H}k.prototype.isReactComponent={},k.prototype.setState=function(e,r){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,r,"setState")},k.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function K(){}K.prototype=k.prototype;function M(e,r,n){this.props=e,this.context=r,this.refs=Z,this.updater=n||H}var L=M.prototype=new K;L.constructor=M,J(L,k.prototype),L.isPureReactComponent=!0;var Q=Array.isArray,Y=Object.prototype.hasOwnProperty,F={current:null},X={key:!0,ref:!0,__self:!0,__source:!0};function ee(e,r,n){var t,s={},a=null,g=null;if(r!=null)for(t in r.ref!==void 0&&(g=r.ref),r.key!==void 0&&(a=""+r.key),r)Y.call(r,t)&&!X.hasOwnProperty(t)&&(s[t]=r[t]);var m=arguments.length-2;if(m===1)s.children=n;else if(1<m){for(var A=Array(m),x=0;x<m;x++)A[x]=arguments[x+2];s.children=A}if(e&&e.defaultProps)for(t in m=e.defaultProps,m)s[t]===void 0&&(s[t]=m[t]);return{$$typeof:S,type:e,key:a,ref:g,props:s,_owner:F.current}}function ve(e,r){return{$$typeof:S,type:e.type,key:r,ref:e.ref,props:e.props,_owner:e._owner}}function I(e){return typeof e=="object"&&e!==null&&e.$$typeof===S}function ke(e){var r={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return r[n]})}var re=/\/+/g;function U(e,r){return typeof e=="object"&&e!==null&&e.key!=null?ke(""+e.key):r.toString(36)}function P(e,r,n,t,s){var a=typeof e;(a==="undefined"||a==="boolean")&&(e=null);var g=!1;if(e===null)g=!0;else switch(a){case"string":case"number":g=!0;break;case"object":switch(e.$$typeof){case S:case me:g=!0}}if(g)return g=e,s=s(g),e=t===""?"."+U(g,0):t,Q(s)?(n="",e!=null&&(n=e.replace(re,"$&/")+"/"),P(s,r,n,"",function(x){return x})):s!=null&&(I(s)&&(s=ve(s,n+(!s.key||g&&g.key===s.key?"":(""+s.key).replace(re,"$&/")+"/")+e)),r.push(s)),1;if(g=0,t=t===""?".":t+":",Q(e))for(var m=0;m<e.length;m++){a=e[m];var A=t+U(a,m);g+=P(a,r,n,A,s)}else if(A=Ce(e),typeof A=="function")for(e=A.call(e),m=0;!(a=e.next()).done;)a=a.value,A=t+U(a,m++),g+=P(a,r,n,A,s);else if(a==="object")throw r=String(e),Error("Objects are not valid as a React child (found: "+(r==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":r)+"). If you meant to render a collection of children, use an array instead.");return g}function R(e,r,n){if(e==null)return e;var t=[],s=0;return P(e,t,"","",function(a){return r.call(n,a,s++)}),t}function Ee(e){if(e._status===-1){var r=e._result;r=r(),r.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=r)}if(e._status===1)return e._result.default;throw e._result}var b={current:null},O={transition:null},Se={ReactCurrentDispatcher:b,ReactCurrentBatchConfig:O,ReactCurrentOwner:F};l.Children={map:R,forEach:function(e,r,n){R(e,function(){r.apply(this,arguments)},n)},count:function(e){var r=0;return R(e,function(){r++}),r},toArray:function(e){return R(e,function(r){return r})||[]},only:function(e){if(!I(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},l.Component=k,l.Fragment=Ae,l.Profiler=de,l.PureComponent=M,l.StrictMode=fe,l.Suspense=he,l.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Se,l.cloneElement=function(e,r,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var t=J({},e.props),s=e.key,a=e.ref,g=e._owner;if(r!=null){if(r.ref!==void 0&&(a=r.ref,g=F.current),r.key!==void 0&&(s=""+r.key),e.type&&e.type.defaultProps)var m=e.type.defaultProps;for(A in r)Y.call(r,A)&&!X.hasOwnProperty(A)&&(t[A]=r[A]===void 0&&m!==void 0?m[A]:r[A])}var A=arguments.length-2;if(A===1)t.children=n;else if(1<A){m=Array(A);for(var x=0;x<A;x++)m[x]=arguments[x+2];t.children=m}return{$$typeof:S,type:e.type,key:s,ref:a,props:t,_owner:g}},l.createContext=function(e){return e={$$typeof:xe,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:pe,_context:e},e.Consumer=e},l.createElement=ee,l.createFactory=function(e){var r=ee.bind(null,e);return r.type=e,r},l.createRef=function(){return{current:null}},l.forwardRef=function(e){return{$$typeof:be,render:e}},l.isValidElement=I,l.lazy=function(e){return{$$typeof:we,_payload:{_status:-1,_result:e},_init:Ee}},l.memo=function(e,r){return{$$typeof:ye,type:e,compare:r===void 0?null:r}},l.startTransition=function(e){var r=O.transition;O.transition={};try{e()}finally{O.transition=r}},l.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},l.useCallback=function(e,r){return b.current.useCallback(e,r)},l.useContext=function(e){return b.current.useContext(e)},l.useDebugValue=function(){},l.useDeferredValue=function(e){return b.current.useDeferredValue(e)},l.useEffect=function(e,r){return b.current.useEffect(e,r)},l.useId=function(){return b.current.useId()},l.useImperativeHandle=function(e,r,n){return b.current.useImperativeHandle(e,r,n)},l.useInsertionEffect=function(e,r){return b.current.useInsertionEffect(e,r)},l.useLayoutEffect=function(e,r){return b.current.useLayoutEffect(e,r)},l.useMemo=function(e,r){return b.current.useMemo(e,r)},l.useReducer=function(e,r,n){return b.current.useReducer(e,r,n)},l.useRef=function(e){return b.current.useRef(e)},l.useState=function(e){return b.current.useState(e)},l.useSyncExternalStore=function(e,r,n){return b.current.useSyncExternalStore(e,r,n)},l.useTransition=function(){return b.current.useTransition()},l.version="18.2.0";function h(e,r){e.debug&&console.log("ThreatComposerExtension: "+r)}const _e={debug:!1,fileExtension:".tc.json",integrationRaw:!0,integrationGitHubCodeBrowser:!0,integrationCodeCatalystCodeBrowser:!0,integrationAmazonCodeBrowser:!0,target:"BUILT_IN"};async function Te(){const e=await T.storage.local.get(["tcConfig"]);return e.tcConfig&&Object.keys(e.tcConfig).length?e.tcConfig:_e}function Pe(e){return!!e.schema}async function D(e,r,n){const t=await fetch(e).then(function(s){return h(n,"Able to get a JSON candidate"),s.json()}).catch(function(s){h(n,"Error during fetch: "+s.message)});if(t&&Pe(t))switch(h(n,"Looks like it could be a Threat Composer file, enabling "+r.textContent+" button"),r.onclick=function(){h(n,"Sending message with candicate JSON object back service worker / background script"),T.runtime.sendMessage(t)},r.tagName){case"BUTTON":r.disabled=!1;break;case"A":r.style.pointerEvents="auto";break}else h(n,"Does NOT look like it's a Threat Composer file, NOT enabling "+r.textContent+" button")}async function Re(e){const r=document.getElementsByTagName("pre"),n=te();r&&(document.body.prepend(n),window.scrollTo(0,0)),h(e,"Proactively attempting to retrieve candidate");const t=window.location.toString();await D(t,n,e)}function te(){const e=document.createElement("button");return e.textContent="View in Threat Composer",e.disabled=!0,e}async function ne(e,r){var n=new RegExp(r.fileExtension);if(window.location.href.match(n)){let t=document.querySelector('[aria-label="Copy raw content"]');if(window.location.href!=e.previousUrl&&(e.previousUrl=window.location.href,e.stopProcessing=!1),t&&!e.stopProcessing){e.stopProcessing=!0;const s=document.querySelector('[aria-label="Copy raw content"]'),a=te();a.setAttribute("type","button"),a.setAttribute("class",s==null?void 0:s.classList.toString()),a.setAttribute("data-size","small"),s==null||s.before(a),h(r,"Proactively attempting to retrieve candidate");const g=window.location+"?raw=1";await D(g,a,r)}}}async function se(e,r){if(document.getElementsByClassName("cs-Tabs__tab-header-actions")&&!e.stopProcessing){e.stopProcessing=!0;const t=document.getElementById("file_actions");if(t){const s=t.getElementsByClassName("button_group")[0],a=document.createElement("li"),g=document.createElement("a");g.setAttribute("class","minibutton"),g.textContent="View in Threat Composer",g.style.pointerEvents="none",a.appendChild(g),s.appendChild(a),h(r,"Proactively attempting to retrieve candidate");const m=window.location+"?raw=1";await D(m,g,r)}}}async function Oe(e,r){const n=document.getElementsByClassName("cs-Tabs__tab-header-actions")[0];if(n&&n.hasChildNodes()&&!e.stopProcessing){e.stopProcessing=!0;const t=document.createElement("a"),s=n.firstChild;t.setAttribute("class",s==null?void 0:s.classList.toString());const a=s==null?void 0:s.firstChild,g=document.createElement("span");g.setAttribute("class",a.classList.toString()),g.textContent="View in Threat Composer",t.appendChild(g),t.onclick=function(){if(document.getElementById("raw-div")){const A=document.getElementById("raw-div").textContent;if(A){const x=JSON.parse(A);h(r,"Sending message with candicate JSON object back service worker / background script"),T.runtime.sendMessage(x)}}},document.getElementsByClassName("cs-Tabs__tab-header-actions")[0].appendChild(t)}}const je={main(){const e={previousUrl:"",stopProcessing:!1},r={stopProcessing:!1},n={stopProcessing:!1};(async function(){const t=await Te(),s={childList:!0,subtree:!0};if(t.integrationRaw&&(window.location.href.match(/raw.githubusercontent.com/)||window.location.href.match(/raw=1/)))h(t,"Based on URL or parameters, assuming raw file view"),await Re(t);else if(t.integrationGitHubCodeBrowser&&window.location.href.match(/github.com/))h(t,"URL is GitHub.com - Setting up mutation observer scoped to *://*.github.com/*"+t.fileExtension+"*"),await ne(e,t),new MutationObserver(()=>ne(e,t)).observe(document,s);else if(t.integrationCodeCatalystCodeBrowser&&window.location.href.match(/codecatalyst.aws/)){h(t,"URL is codecatalyst.aws - Assuming code viewer");const a=document.createElement("script");a.src=T.runtime.getURL("scriptInjectForCodeCatalyst.js"),a.onload=function(){this.remove()},(document.head||document.documentElement).appendChild(a),new MutationObserver(()=>Oe(n,t)).observe(document.body,s)}else t.integrationAmazonCodeBrowser&&window.location.href.match(/code.amazon.com/)&&(h(t,"URL is code.amazon.com - Assuming code browser"),await se(r,t),new MutationObserver(()=>se(r,t)).observe(document.body,s))})()}};function j(e,...r){}var Ne={debug:(...e)=>j(console.debug,...e),log:(...e)=>j(console.log,...e),warn:(...e)=>j(console.warn,...e),error:(...e)=>j(console.error,...e)};(async()=>{try{await je.main()}catch(e){Ne.error('The unlisted script "content-script" crashed on startup!',e)}})()})();
