(function(){"use strict";function ie(e){return typeof e=="function"?{main:e}:e}var ae=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ge(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var G={exports:{}};(function(e,r){(function(s,o){o(e)})(typeof globalThis<"u"?globalThis:typeof self<"u"?self:ae,function(s){var o,g;if(!((g=(o=globalThis.chrome)==null?void 0:o.runtime)!=null&&g.id))throw new Error("This script should only be loaded in a browser extension.");if(typeof globalThis.browser>"u"||Object.getPrototypeOf(globalThis.browser)!==Object.prototype){const c="The message port closed before a response was received.",f=m=>{const A={alarms:{clear:{minArgs:0,maxArgs:1},clearAll:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getAll:{minArgs:0,maxArgs:0}},bookmarks:{create:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},getChildren:{minArgs:1,maxArgs:1},getRecent:{minArgs:1,maxArgs:1},getSubTree:{minArgs:1,maxArgs:1},getTree:{minArgs:0,maxArgs:0},move:{minArgs:2,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeTree:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}},browserAction:{disable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},enable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},getBadgeBackgroundColor:{minArgs:1,maxArgs:1},getBadgeText:{minArgs:1,maxArgs:1},getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},openPopup:{minArgs:0,maxArgs:0},setBadgeBackgroundColor:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setBadgeText:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},browsingData:{remove:{minArgs:2,maxArgs:2},removeCache:{minArgs:1,maxArgs:1},removeCookies:{minArgs:1,maxArgs:1},removeDownloads:{minArgs:1,maxArgs:1},removeFormData:{minArgs:1,maxArgs:1},removeHistory:{minArgs:1,maxArgs:1},removeLocalStorage:{minArgs:1,maxArgs:1},removePasswords:{minArgs:1,maxArgs:1},removePluginData:{minArgs:1,maxArgs:1},settings:{minArgs:0,maxArgs:0}},commands:{getAll:{minArgs:0,maxArgs:0}},contextMenus:{remove:{minArgs:1,maxArgs:1},removeAll:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},cookies:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:1,maxArgs:1},getAllCookieStores:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},devtools:{inspectedWindow:{eval:{minArgs:1,maxArgs:2,singleCallbackArg:!1}},panels:{create:{minArgs:3,maxArgs:3,singleCallbackArg:!0},elements:{createSidebarPane:{minArgs:1,maxArgs:1}}}},downloads:{cancel:{minArgs:1,maxArgs:1},download:{minArgs:1,maxArgs:1},erase:{minArgs:1,maxArgs:1},getFileIcon:{minArgs:1,maxArgs:2},open:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},pause:{minArgs:1,maxArgs:1},removeFile:{minArgs:1,maxArgs:1},resume:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},extension:{isAllowedFileSchemeAccess:{minArgs:0,maxArgs:0},isAllowedIncognitoAccess:{minArgs:0,maxArgs:0}},history:{addUrl:{minArgs:1,maxArgs:1},deleteAll:{minArgs:0,maxArgs:0},deleteRange:{minArgs:1,maxArgs:1},deleteUrl:{minArgs:1,maxArgs:1},getVisits:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1}},i18n:{detectLanguage:{minArgs:1,maxArgs:1},getAcceptLanguages:{minArgs:0,maxArgs:0}},identity:{launchWebAuthFlow:{minArgs:1,maxArgs:1}},idle:{queryState:{minArgs:1,maxArgs:1}},management:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},getSelf:{minArgs:0,maxArgs:0},setEnabled:{minArgs:2,maxArgs:2},uninstallSelf:{minArgs:0,maxArgs:1}},notifications:{clear:{minArgs:1,maxArgs:1},create:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:0},getPermissionLevel:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},pageAction:{getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},hide:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},permissions:{contains:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},request:{minArgs:1,maxArgs:1}},runtime:{getBackgroundPage:{minArgs:0,maxArgs:0},getPlatformInfo:{minArgs:0,maxArgs:0},openOptionsPage:{minArgs:0,maxArgs:0},requestUpdateCheck:{minArgs:0,maxArgs:0},sendMessage:{minArgs:1,maxArgs:3},sendNativeMessage:{minArgs:2,maxArgs:2},setUninstallURL:{minArgs:1,maxArgs:1}},sessions:{getDevices:{minArgs:0,maxArgs:1},getRecentlyClosed:{minArgs:0,maxArgs:1},restore:{minArgs:0,maxArgs:1}},storage:{local:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},managed:{get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1}},sync:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}}},tabs:{captureVisibleTab:{minArgs:0,maxArgs:2},create:{minArgs:1,maxArgs:1},detectLanguage:{minArgs:0,maxArgs:1},discard:{minArgs:0,maxArgs:1},duplicate:{minArgs:1,maxArgs:1},executeScript:{minArgs:1,maxArgs:2},get:{minArgs:1,maxArgs:1},getCurrent:{minArgs:0,maxArgs:0},getZoom:{minArgs:0,maxArgs:1},getZoomSettings:{minArgs:0,maxArgs:1},goBack:{minArgs:0,maxArgs:1},goForward:{minArgs:0,maxArgs:1},highlight:{minArgs:1,maxArgs:1},insertCSS:{minArgs:1,maxArgs:2},move:{minArgs:2,maxArgs:2},query:{minArgs:1,maxArgs:1},reload:{minArgs:0,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeCSS:{minArgs:1,maxArgs:2},sendMessage:{minArgs:2,maxArgs:3},setZoom:{minArgs:1,maxArgs:2},setZoomSettings:{minArgs:1,maxArgs:2},update:{minArgs:1,maxArgs:2}},topSites:{get:{minArgs:0,maxArgs:0}},webNavigation:{getAllFrames:{minArgs:1,maxArgs:1},getFrame:{minArgs:1,maxArgs:1}},webRequest:{handlerBehaviorChanged:{minArgs:0,maxArgs:0}},windows:{create:{minArgs:0,maxArgs:1},get:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:1},getCurrent:{minArgs:0,maxArgs:1},getLastFocused:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}}};if(Object.keys(A).length===0)throw new Error("api-metadata.json has not been included in browser-polyfill");class y extends WeakMap{constructor(n,l=void 0){super(l),this.createItem=n}get(n){return this.has(n)||this.set(n,this.createItem(n)),super.get(n)}}const Pe=t=>t&&typeof t=="object"&&typeof t.then=="function",te=(t,n)=>(...l)=>{m.runtime.lastError?t.reject(new Error(m.runtime.lastError.message)):n.singleCallbackArg||l.length<=1&&n.singleCallbackArg!==!1?t.resolve(l[0]):t.resolve(l)},j=t=>t==1?"argument":"arguments",Re=(t,n)=>function(u,...x){if(x.length<n.minArgs)throw new Error(`Expected at least ${n.minArgs} ${j(n.minArgs)} for ${t}(), got ${x.length}`);if(x.length>n.maxArgs)throw new Error(`Expected at most ${n.maxArgs} ${j(n.maxArgs)} for ${t}(), got ${x.length}`);return new Promise((h,b)=>{if(n.fallbackToNoCallback)try{u[t](...x,te({resolve:h,reject:b},n))}catch(a){console.warn(`${t} API method doesn't seem to support the callback parameter, falling back to call it without a callback: `,a),u[t](...x),n.fallbackToNoCallback=!1,n.noCallback=!0,h()}else n.noCallback?(u[t](...x),h()):u[t](...x,te({resolve:h,reject:b},n))})},ne=(t,n,l)=>new Proxy(n,{apply(u,x,h){return l.call(x,t,...h)}});let U=Function.call.bind(Object.prototype.hasOwnProperty);const B=(t,n={},l={})=>{let u=Object.create(null),x={has(b,a){return a in t||a in u},get(b,a,w){if(a in u)return u[a];if(!(a in t))return;let d=t[a];if(typeof d=="function")if(typeof n[a]=="function")d=ne(t,t[a],n[a]);else if(U(l,a)){let C=Re(a,l[a]);d=ne(t,t[a],C)}else d=d.bind(t);else if(typeof d=="object"&&d!==null&&(U(n,a)||U(l,a)))d=B(d,n[a],l[a]);else if(U(l,"*"))d=B(d,n[a],l["*"]);else return Object.defineProperty(u,a,{configurable:!0,enumerable:!0,get(){return t[a]},set(C){t[a]=C}}),d;return u[a]=d,d},set(b,a,w,d){return a in u?u[a]=w:t[a]=w,!0},defineProperty(b,a,w){return Reflect.defineProperty(u,a,w)},deleteProperty(b,a){return Reflect.deleteProperty(u,a)}},h=Object.create(t);return new Proxy(h,x)},q=t=>({addListener(n,l,...u){n.addListener(t.get(l),...u)},hasListener(n,l){return n.hasListener(t.get(l))},removeListener(n,l){n.removeListener(t.get(l))}}),$e=new y(t=>typeof t!="function"?t:function(l){const u=B(l,{},{getContent:{minArgs:0,maxArgs:0}});t(u)}),se=new y(t=>typeof t!="function"?t:function(l,u,x){let h=!1,b,a=new Promise(E=>{b=function(v){h=!0,E(v)}}),w;try{w=t(l,u,b)}catch(E){w=Promise.reject(E)}const d=w!==!0&&Pe(w);if(w!==!0&&!d&&!h)return!1;const C=E=>{E.then(v=>{x(v)},v=>{let W;v&&(v instanceof Error||typeof v.message=="string")?W=v.message:W="An unexpected error occurred",x({__mozWebExtensionPolyfillReject__:!0,message:W})}).catch(v=>{console.error("Failed to send onMessage rejected reply",v)})};return C(d?w:a),!0}),Oe=({reject:t,resolve:n},l)=>{m.runtime.lastError?m.runtime.lastError.message===c?n():t(new Error(m.runtime.lastError.message)):l&&l.__mozWebExtensionPolyfillReject__?t(new Error(l.message)):n(l)},oe=(t,n,l,...u)=>{if(u.length<n.minArgs)throw new Error(`Expected at least ${n.minArgs} ${j(n.minArgs)} for ${t}(), got ${u.length}`);if(u.length>n.maxArgs)throw new Error(`Expected at most ${n.maxArgs} ${j(n.maxArgs)} for ${t}(), got ${u.length}`);return new Promise((x,h)=>{const b=Oe.bind(null,{resolve:x,reject:h});u.push(b),l.sendMessage(...u)})},Me={devtools:{network:{onRequestFinished:q($e)}},runtime:{onMessage:q(se),onMessageExternal:q(se),sendMessage:oe.bind(null,"sendMessage",{minArgs:1,maxArgs:3})},tabs:{sendMessage:oe.bind(null,"sendMessage",{minArgs:2,maxArgs:3})}},H={clear:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}};return A.privacy={network:{"*":H},services:{"*":H},websites:{"*":H}},B(m,Me,A)};s.exports=f(chrome)}else s.exports=globalThis.browser})})(G);var le=G.exports,k=ge(le),i={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var S=Symbol.for("react.element"),ue=Symbol.for("react.portal"),me=Symbol.for("react.fragment"),ce=Symbol.for("react.strict_mode"),Ae=Symbol.for("react.profiler"),fe=Symbol.for("react.provider"),de=Symbol.for("react.context"),xe=Symbol.for("react.forward_ref"),pe=Symbol.for("react.suspense"),ye=Symbol.for("react.memo"),he=Symbol.for("react.lazy"),V=Symbol.iterator;function be(e){return e===null||typeof e!="object"?null:(e=V&&e[V]||e["@@iterator"],typeof e=="function"?e:null)}var z={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Z=Object.assign,J={};function _(e,r,s){this.props=e,this.context=r,this.refs=J,this.updater=s||z}_.prototype.isReactComponent={},_.prototype.setState=function(e,r){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,r,"setState")},_.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function K(){}K.prototype=_.prototype;function I(e,r,s){this.props=e,this.context=r,this.refs=J,this.updater=s||z}var L=I.prototype=new K;L.constructor=I,Z(L,_.prototype),L.isPureReactComponent=!0;var Q=Array.isArray,Y=Object.prototype.hasOwnProperty,N={current:null},X={key:!0,ref:!0,__self:!0,__source:!0};function ee(e,r,s){var o,g={},c=null,f=null;if(r!=null)for(o in r.ref!==void 0&&(f=r.ref),r.key!==void 0&&(c=""+r.key),r)Y.call(r,o)&&!X.hasOwnProperty(o)&&(g[o]=r[o]);var m=arguments.length-2;if(m===1)g.children=s;else if(1<m){for(var A=Array(m),y=0;y<m;y++)A[y]=arguments[y+2];g.children=A}if(e&&e.defaultProps)for(o in m=e.defaultProps,m)g[o]===void 0&&(g[o]=m[o]);return{$$typeof:S,type:e,key:c,ref:f,props:g,_owner:N.current}}function we(e,r){return{$$typeof:S,type:e.type,key:r,ref:e.ref,props:e.props,_owner:e._owner}}function F(e){return typeof e=="object"&&e!==null&&e.$$typeof===S}function ve(e){var r={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(s){return r[s]})}var re=/\/+/g;function D(e,r){return typeof e=="object"&&e!==null&&e.key!=null?ve(""+e.key):r.toString(36)}function T(e,r,s,o,g){var c=typeof e;(c==="undefined"||c==="boolean")&&(e=null);var f=!1;if(e===null)f=!0;else switch(c){case"string":case"number":f=!0;break;case"object":switch(e.$$typeof){case S:case ue:f=!0}}if(f)return f=e,g=g(f),e=o===""?"."+D(f,0):o,Q(g)?(s="",e!=null&&(s=e.replace(re,"$&/")+"/"),T(g,r,s,"",function(y){return y})):g!=null&&(F(g)&&(g=we(g,s+(!g.key||f&&f.key===g.key?"":(""+g.key).replace(re,"$&/")+"/")+e)),r.push(g)),1;if(f=0,o=o===""?".":o+":",Q(e))for(var m=0;m<e.length;m++){c=e[m];var A=o+D(c,m);f+=T(c,r,s,A,g)}else if(A=be(e),typeof A=="function")for(e=A.call(e),m=0;!(c=e.next()).done;)c=c.value,A=o+D(c,m++),f+=T(c,r,s,A,g);else if(c==="object")throw r=String(e),Error("Objects are not valid as a React child (found: "+(r==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":r)+"). If you meant to render a collection of children, use an array instead.");return f}function P(e,r,s){if(e==null)return e;var o=[],g=0;return T(e,o,"","",function(c){return r.call(s,c,g++)}),o}function ke(e){if(e._status===-1){var r=e._result;r=r(),r.then(function(s){(e._status===0||e._status===-1)&&(e._status=1,e._result=s)},function(s){(e._status===0||e._status===-1)&&(e._status=2,e._result=s)}),e._status===-1&&(e._status=0,e._result=r)}if(e._status===1)return e._result.default;throw e._result}var p={current:null},R={transition:null},_e={ReactCurrentDispatcher:p,ReactCurrentBatchConfig:R,ReactCurrentOwner:N};i.Children={map:P,forEach:function(e,r,s){P(e,function(){r.apply(this,arguments)},s)},count:function(e){var r=0;return P(e,function(){r++}),r},toArray:function(e){return P(e,function(r){return r})||[]},only:function(e){if(!F(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},i.Component=_,i.Fragment=me,i.Profiler=Ae,i.PureComponent=I,i.StrictMode=ce,i.Suspense=pe,i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=_e,i.cloneElement=function(e,r,s){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var o=Z({},e.props),g=e.key,c=e.ref,f=e._owner;if(r!=null){if(r.ref!==void 0&&(c=r.ref,f=N.current),r.key!==void 0&&(g=""+r.key),e.type&&e.type.defaultProps)var m=e.type.defaultProps;for(A in r)Y.call(r,A)&&!X.hasOwnProperty(A)&&(o[A]=r[A]===void 0&&m!==void 0?m[A]:r[A])}var A=arguments.length-2;if(A===1)o.children=s;else if(1<A){m=Array(A);for(var y=0;y<A;y++)m[y]=arguments[y+2];o.children=m}return{$$typeof:S,type:e.type,key:g,ref:c,props:o,_owner:f}},i.createContext=function(e){return e={$$typeof:de,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:fe,_context:e},e.Consumer=e},i.createElement=ee,i.createFactory=function(e){var r=ee.bind(null,e);return r.type=e,r},i.createRef=function(){return{current:null}},i.forwardRef=function(e){return{$$typeof:xe,render:e}},i.isValidElement=F,i.lazy=function(e){return{$$typeof:he,_payload:{_status:-1,_result:e},_init:ke}},i.memo=function(e,r){return{$$typeof:ye,type:e,compare:r===void 0?null:r}},i.startTransition=function(e){var r=R.transition;R.transition={};try{e()}finally{R.transition=r}},i.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},i.useCallback=function(e,r){return p.current.useCallback(e,r)},i.useContext=function(e){return p.current.useContext(e)},i.useDebugValue=function(){},i.useDeferredValue=function(e){return p.current.useDeferredValue(e)},i.useEffect=function(e,r){return p.current.useEffect(e,r)},i.useId=function(){return p.current.useId()},i.useImperativeHandle=function(e,r,s){return p.current.useImperativeHandle(e,r,s)},i.useInsertionEffect=function(e,r){return p.current.useInsertionEffect(e,r)},i.useLayoutEffect=function(e,r){return p.current.useLayoutEffect(e,r)},i.useMemo=function(e,r){return p.current.useMemo(e,r)},i.useReducer=function(e,r,s){return p.current.useReducer(e,r,s)},i.useRef=function(e){return p.current.useRef(e)},i.useState=function(e){return p.current.useState(e)},i.useSyncExternalStore=function(e,r,s){return p.current.useSyncExternalStore(e,r,s)},i.useTransition=function(){return p.current.useTransition()},i.version="18.2.0";function $(e,r){e.debug&&console.log("ThreatComposerExtension: "+r)}var O=(e=>(e.BUILT_IN="BUILT_IN",e.GITHUB_PAGES="GITHUB_PAGES",e.CUSTOM_HOST="CUSTOM_HOST",e))(O||{});const Ce={debug:!1,fileExtension:".tc.json",integrationRaw:!0,integrationGitHubCodeBrowser:!0,integrationCodeCatalystCodeBrowser:!0,integrationAmazonCodeBrowser:!0,target:"BUILT_IN"};async function Se(){const e=await k.storage.local.get(["tcConfig"]);return e.tcConfig&&Object.keys(e.tcConfig).length?e.tcConfig:Ce}const Ee=ie(()=>{Se().then(e=>{$(e,"index.hml is here:"+k.runtime.getURL("index.html")),k.runtime.onMessage.addListener(function(r){const s=e.target;let o="",g="";s==O.BUILT_IN?(o=k.runtime.getURL("index.html"),g=k.runtime.getURL("*")):s==O.GITHUB_PAGES?(o="https://awslabs.github.io/threat-composer",g=o):s==O.CUSTOM_HOST&&(o=e.customUrl??"",g=o),r.schema&&($(e,"Message recieved - Threat Model JSON"),k.storage.local.set({threatModel:r}).then(()=>{$(e,"Saved to browser storage")}),k.tabs.query({url:g}).then(c=>{c.length>0?k.tabs.update(c[0].id,{active:!0}):k.tabs.create({url:o})}))})}).catch(e=>{$({debug:!0},e)})});function M(e,...r){}var Te={debug:(...e)=>M(console.debug,...e),log:(...e)=>M(console.log,...e),warn:(...e)=>M(console.warn,...e),error:(...e)=>M(console.error,...e)};try{Ee.main()instanceof Promise&&console.warn("The background's main() function return a promise, but it must be synchonous")}catch(e){throw Te.error("The background crashed on startup!"),e}})();
